# دليل إعداد قاعدة البيانات

## 1. إنشاء قاعدة البيانات في Supabase

### الخطوة الأولى: إنشاء مشروع جديد
1. اذهب إلى [supabase.com](https://supabase.com)
2. اضغط على "New Project"
3. اختر اسم المشروع: `alfahed-sales-system`
4. اختر كلمة مرور قوية
5. اختر المنطقة الأقرب لك
6. انتظر حتى يتم إنشاء المشروع

### الخطوة الثانية: الحصول على بيانات الاتصال
1. اذهب إلى Settings > API
2. انسخ `Project URL` و `anon public` key
3. استبدل القيم في `src/lib/supabase.ts`

### الخطوة الثالثة: إنشاء الجداول
1. اذهب إلى SQL Editor
2. انسخ والصق محتوى ملف `database_schema.sql`
3. اضغط على "Run" لتنفيذ الكود

## 2. هيكل قاعدة البيانات

### الجداول الرئيسية:
- **categories**: فئات المنتجات
- **products**: المنتجات
- **customers**: العملاء
- **sales**: المبيعات
- **sale_items**: تفاصيل المبيعات
- **invoices**: الفواتير
- **payments**: المدفوعات
- **inventory**: المخزون

### العلاقات:
- المنتجات مرتبطة بالفئات
- المبيعات مرتبطة بالعملاء
- تفاصيل المبيعات مرتبطة بالمنتجات والمبيعات
- الفواتير مرتبطة بالمبيعات والعملاء

## 3. البيانات التجريبية

سيتم إنشاء:
- 5 فئات منتجات
- 3 عملاء
- 10 منتجات تجريبية

## 4. الميزات التلقائية

- تحديث المخزون عند البيع
- حساب إجماليات المبيعات
- تحديث حالة الفواتير
- تحديث timestamps

## 5. اختبار النظام

بعد إنشاء قاعدة البيانات:
1. أعد تشغيل التطبيق
2. اذهب إلى صفحة الأصناف
3. تأكد من ظهور الفئات والمنتجات التجريبية
4. اختبر إنشاء عميل جديد
5. اختبر إنشاء بيع جديد

## 6. استكشاف الأخطاء

إذا واجهت مشاكل:
1. تحقق من console المتصفح
2. تأكد من صحة بيانات الاتصال
3. تحقق من وجود جميع الجداول
4. تأكد من تنفيذ جميع triggers و functions
